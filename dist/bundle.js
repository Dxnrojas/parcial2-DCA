(()=>{"use strict";var t={526:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const o=r(807),i=r(997);var n;!function(t){t.uid="uid",t.image="image",t.description="description",t.category="category",t.price="price",t.rating="rating"}(n||(e.Attribute=n={}));class a extends HTMLElement{static get observedAttributes(){return Object.keys(n)}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(t,e,r){t===n.price||t===n.rating||t===n.uid?this[t]=r?Number(r):void 0:this[t]=r,this.render()}render(){var t;if(!this.shadowRoot)return;this.shadowRoot.innerHTML=`\n\n        \n            <div class="product-card">\n                <img src="${this.image}" alt="Product Image">\n                <h2>${this.description}</h2>\n                <p>Category: ${this.category}</p>\n                <p>Price: $${this.price}</p>\n                <p>Rating: ${this.rating}</p>\n                <button id="add-to-cart-btn">Add to Cart</button>\n            </div>\n        `;const e=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector("#add-to-cart-btn");null==e||e.addEventListener("click",(()=>{const t={uid:this.uid,image:this.image,description:this.description,category:this.category,price:this.price,rating:this.rating};(0,o.dispatch)((0,i.addToCart)(t))}))}}customElements.define("product-component",a),e.default=a},386:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=void 0;const o=r(807),i=r(997);var n;!function(t){t.uid="uid",t.utitle="utitle",t.price="price",t.image="image"}(n||(e.Attribute=n={}));class a extends HTMLElement{static get observedAttributes(){return Object.keys(n)}constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){this.render()}attributeChangedCallback(t,e,r){t===n.uid?this.uid=r:t===n.price?this.price=r?Number(r):void 0:this[t]=r,this.render()}render(){if(this.shadowRoot){this.shadowRoot.innerHTML=`\n           \n           \n                <div class="cart-item">\n                    <img src="${this.getAttribute("image")}" alt="${this.getAttribute("utitle")}" />\n                    <div class="item-info">\n                        <h3>${this.getAttribute("utitle")}</h3>\n                        <p>$${this.getAttribute("price")}</p>\n                    </div>\n                    <button class="remove-btn">Remove</button>\n                </div>\n            `;const t=this.shadowRoot.querySelector(".remove-btn");null==t||t.addEventListener("click",(()=>{const t={uid:this.uid,utitle:this.utitle,price:this.price,image:this.image};console.log("Item details:",t),(0,o.dispatch)((0,i.removeFromCart)(Number(this.uid)))}))}}}customElements.define("cart-component",a),e.default=a},752:function(t,e,r){var o=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))((function(i,n){function a(t){try{s(o.next(t))}catch(t){n(t)}}function c(t){try{s(o.throw(t))}catch(t){n(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const i=r(807),n=r(526),a=r(386),c=r(997);class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),(0,i.addObserver)(this)}connectedCallback(){return o(this,void 0,void 0,(function*(){if(console.log("Dashboard connected"),i.appState.products&&0!==i.appState.products.length)console.log("Products already loaded:",i.appState.products);else{const t=yield(0,c.getProductsState)();(0,i.dispatch)(t),console.log("Products state after fetch:",i.appState.products)}this.render()}))}fetchProducts(){try{if(!i.appState.products||0===i.appState.products.length)return console.log("No products available in the state."),null;const t=this.ownerDocument.createElement("section");return t.className="products-container",i.appState.products.forEach((e=>{const r=this.ownerDocument.createElement("product-component");r.setAttribute(n.Attribute.uid,e.id.toString()),r.setAttribute(n.Attribute.image,e.image),r.setAttribute(n.Attribute.description,e.title),r.setAttribute(n.Attribute.category,e.category),r.setAttribute(n.Attribute.price,e.price.toString()),r.setAttribute(n.Attribute.rating,e.rating.rate.toString()),t.appendChild(r)})),console.log("Products rendered:",i.appState.products),t}catch(t){return console.error("Error rendering products:",t),null}}renderShoppingCart(){const t=this.ownerDocument.createElement("section");return t.className="cart-container",0===i.appState.cart.length?t.innerHTML="<p>Your cart is empty</p>":i.appState.cart.forEach((e=>{var r,o;const i=this.ownerDocument.createElement("cart-component");i.setAttribute(a.Attribute.uid,(null===(r=e.uid)||void 0===r?void 0:r.toString())||""),i.setAttribute(a.Attribute.utitle,e.description||""),i.setAttribute(a.Attribute.price,(null===(o=e.price)||void 0===o?void 0:o.toString())||""),i.setAttribute(a.Attribute.image,e.image||""),t.appendChild(i)})),t}render(){if(this.shadowRoot){this.shadowRoot.innerHTML="\n            \n            \n            ";const t=this.ownerDocument.createElement("h2");t.textContent="Product List",this.shadowRoot.appendChild(t);const e=this.fetchProducts();e?this.shadowRoot.appendChild(e):this.shadowRoot.innerHTML+="<p>no encontre los productos :( </p>";const r=this.ownerDocument.createElement("h2");r.textContent="Shopping Cart",this.shadowRoot.appendChild(r);const o=this.renderShoppingCart();o&&this.shadowRoot.appendChild(o)}}}customElements.define("app-container",s),e.default=s},921:function(t,e){var r=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))((function(i,n){function a(t){try{s(o.next(t))}catch(t){n(t)}}function c(t){try{s(o.throw(t))}catch(t){n(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.apiProducts=void 0,e.apiProducts=()=>r(void 0,void 0,void 0,(function*(){try{const t=yield fetch("https://fakestoreapi.com/products");return yield t.json()}catch(t){return console.error("error",t),[]}}))},997:function(t,e,r){var o=this&&this.__awaiter||function(t,e,r,o){return new(r||(r=Promise))((function(i,n){function a(t){try{s(o.next(t))}catch(t){n(t)}}function c(t){try{s(o.throw(t))}catch(t){n(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getProductsState=e.removeFromCart=e.addToCart=void 0;const i=r(155),n=r(921);e.addToCart=t=>({action:i.Actions.ADD_TO_CART,payload:t}),e.removeFromCart=t=>({action:i.Actions.REMOVE_FROM_CART,payload:t}),e.getProductsState=()=>o(void 0,void 0,void 0,(function*(){const t=yield(0,n.apiProducts)();return{action:i.Actions.GET_PRODUCTS,payload:t}}))},950:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reducer=void 0;const o=r(155);e.reducer=(t,e)=>{const{action:r,payload:i}=t;switch(r){case o.Actions.ADD_TO_CART:return Object.assign(Object.assign({},e),{cart:[...e.cart,i]});case o.Actions.REMOVE_FROM_CART:const t=e.cart.filter((t=>t.uid!==i));return Object.assign(Object.assign({},e),{cart:t});case o.Actions.GET_PRODUCTS:return Object.assign(Object.assign({},e),{products:i});default:return e}}},807:function(t,e,r){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.addObserver=e.dispatch=e.appState=void 0;const i=r(950),n=o(r(167));e.appState=n.default.get("STORE",{screen:"DASHBOARD",cart:[],products:[]});let a=[];e.dispatch=t=>{const r=JSON.parse(JSON.stringify(e.appState)),o=(0,i.reducer)(t,r);var c;e.appState=o,c=o,n.default.set("STORE",c),a.forEach((t=>t.render()))},e.addObserver=t=>{a=[...a,t]}},155:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.Actions=void 0,function(t){t.ADD_TO_CART="ADD_TO_CART",t.REMOVE_FROM_CART="REMOVE_FROM_CART",t.GET_PRODUCTS="GET_PRODUCTS"}(r||(e.Actions=r={}))},167:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={get:(t,e)=>{const r=localStorage.getItem(t)||sessionStorage.getItem(t);return r?JSON.parse(r):e},set:(t,e,r=!1)=>{const o=r?sessionStorage:localStorage,i=JSON.stringify(e);o.setItem(t,i)}}}},e={};!function r(o){var i=e[o];if(void 0!==i)return i.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,r),n.exports}(752)})();